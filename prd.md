---
created: 2025-05-25 22:20
author: leehansol
source: Gemini 2.5 pro & leehansol
type: "[[🧑‍💻 Project Note]]"
tags:
  - "#AISmartLedger"
  - "#AI스마트가계부"
  - "#PySide"
  - "#파이썬"
  - "#Python"
  - "#SQLite"
  - "#OpenAIAPI"
  - "#데스크톱애플리케이션"
  - "#CSV처리"
  - "#AI자동분류"
  - "#ChatGPTAPI"
  - "#거래내역파싱"
  - "#계좌간이체"
  - "#대시보드시각화"
  - "#카테고리분류"
  - "#로컬데이터베이스"
  - "#데이터백업복원"
---

## 📝 상세 계획/사양서 (prd.md)

> \[!note\] 이 문서는 무엇인가요?
> 이 문서는 여러분이 만들고 싶은 애플리케이션(앱, 웹사이트, 프로그램 등)에 대한 모든 아이디어와 요구사항을 상세하게 정리하는 \*\*'종합 설계도'\*\*입니다. 개발 지식이 없어도 괜찮습니다! 여러분의 아이디어를 구체적으로 적으면, 나중에 AI(인공지능)가 이 문서를 보고 여러분이 원하는 결과물을 만드는 데 큰 도움을 받습니다. 빈칸을 채우거나 예시를 참고하여 여러분의 프로젝트에 맞게 수정해보세요.
>
> \[!note\] 왜 중요한가요?
> 상세한 계획은 AI가 **"무엇을"**, **"왜"**, **"어떻게"** 만들어야 하는지 정확히 이해하게 해줍니다. 건물을 지을 때 설계도가 필요한 것처럼, 소프트웨어를 만들 때도 이 계획서가 그런 역할을 합니다. 꼼꼼하게 작성할수록 시행착오를 줄이고 원하는 결과에 더 가까워질 수 있습니다.
>
> \[!note\] 어떻게 작성하나요?
> 아래 각 항목에 대해 최대한 자세하게, 생각나는 모든 것을 적어보세요. AI와 협력하여 초안을 만들고, 질문을 통해 내용을 보충해나갈 수 있습니다. *"이런 것도 적어야 하나?"* 싶은 사소한 것도 괜찮습니다!

# 1. 프로젝트 개요 (Overview)

## 1.1. 프로젝트 이름 (Project Name)

프로젝트 이름: **AI 스마트 가계부**

## 1.2. 프로젝트 목표 (Goal)

프로젝트 목표:

- 은행 입출금 내역(CSV 또는 Excel 파일)을 AI를 활용하여 가계부 카테고리별로 **자동 분류**하고, 이를 기반으로 개인의 지출 내역을 **손쉽게 관리 및 분석**할 수 있는 프로그램을 개발합니다.

- 기존 수동 가계부 정리(예: 엑셀 스프레드시트 활용)의 **번거로움과 시간 소모를 획기적으로 줄여** 사용자의 편의성을 극대화합니다.

- 개인화된 가계부 데이터베이스가 누적됨에 따라, 사용자의 소비/소득/지출 패턴에 대한 **다양하고 심층적인 분석을 시도해 볼 수 있는 기반을 마련**합니다.

## 1.3. 타겟 사용자 (Target Audience)

타겟 사용자:

- 현재 은행 거래 내역(주로 CSV 또는 Excel 파일 형태)을 **수동으로 가계부에 정리하며 불편함**을 느끼는 개인 사용자.

- 자신의 소비 패턴을 보다 **쉽고 효율적으로 파악하고 관리**하고자 하는 개인.

- AI 기술을 활용한 **새로운 방식의 가계부 작성**에 관심 있는 사용자.

# 2. 주요 기능 및 동작 방식 (Core Features & How They Work)

## 2.1. 기능 1: 은행 거래내역 파일 가져오기 및 처리

- 기능 이름: **은행 거래내역 파일 가져오기 및 처리**
    - **설명:** 사용자가 은행에서 다운로드한 거래내역 파일(CSV 또는 Excel 형식)을 프로그램으로 안전하게 불러오고, 내부적으로 처리하여 AI 자동 분류 단계를 준비합니다. 다양한 은행 및 파일 형식의 데이터를 일관된 내부 데이터 구조로 변환하는 과정을 포함합니다. 사용자가 올바른 형식의 파일을 준비할 수 있도록 파일 형식 가이드라인을 제공합니다.
    - **사용자 시나리오:**

        1. 사용자가 프로그램 메인 화면(또는 지정된 메뉴)에서 "거래내역 파일 불러오기" 버튼을 클릭합니다.
        2. (최초 실행 또는 설정에 따라) 시스템은 "올바른 파일 형식 안내" 팝업 메시지와 예시 이미지를 보여주며, 사용자에게 특정 열 순서(예: A열-날짜, B열-시간, C열-항목, D열-입금, E열-출금) 및 헤더 존재 여부 등을 안내합니다. 사용자는 이 안내를 확인하고 파일을 준비하거나, "다시 보지 않기" 또는 설정을 통해 팝업 표시 여부를 선택할 수 있습니다.
        3. 운영체제의 파일 탐색기 창이 화면에 나타납니다.
        4. 사용자는 자신의 컴퓨터에 저장된 은행 거래내역 파일(예: 'shinhan_transaction_2023.csv', 'kb\_계좌내역.xlsx')을 선택하고 "열기" 버튼을 클릭합니다. (여러 계좌의 파일을 한 번에 또는 순차적으로 업로드 할 수 있습니다.)
    - **시스템 반응:**

        1. (사용자가 "거래내역 파일 불러오기" 버튼 클릭 시) 시스템은 파일 선택을 위한 운영체제 기본 파일 탐색기 창을 표시합니다.
        2. (사용자가 파일을 선택하고 "열기" 버튼 클릭 시)
            - 시스템은 선택된 파일의 확장자를 확인하여 지원하는 형식(CSV, XLS, XLSX 등)인지 우선 검사합니다.
            - 시스템은 파일 크기를 확인하여, 50MB를 초과하는 파일의 경우 사용자에게 "파일 용량이 너무 큽니다. (50MB 이하의 파일만 업로드 가능합니다.)" 메시지를 표시하고 업로드를 중단합니다.
            - 지원하는 형식일 경우: 파일 내용을 읽어들여, 각 거래 내역(날짜, 거래 내용(적요), 입금액, 출금액, 잔액 등)을 추출하여 프로그램 내부에서 사용할 표준화된 데이터 형태로 변환(파싱)합니다. (각 거래내역에는 어느 계좌의 거래인지 식별할 수 있는 정보가 포함되거나, 파일 단위로 계좌를 구분할 수 있어야 함)
            - 파싱 과정 중 예상치 못한 데이터 형식(예: 날짜가 아닌 문자열, 금액이 숫자가 아닌 경우 등)이나 필수 정보 누락이 발견되면, 해당 내역은 오류로 표시하거나 사용자에게 알릴 준비를 합니다.
            - 지원하지 않는 파일 형식이거나 파일이 암호화되어 읽을 수 없는 경우, 또는 심각하게 손상된 경우에는 사용자에게 "지원하지 않는 파일 형식이거나 파일이 손상되어 불러올 수 없습니다. CSV 또는 Excel 형식의 파일을 선택해주세요." 와 같은 명확한 오류 메시지를 표시합니다.
            - 성공적으로 파싱된 데이터는 다음 단계인 '거래내역 분류 작업 화면'에 표시될 준비를 합니다.
    - **필요한 정보/데이터:**

        - **입력:**

            - 사용자가 선택한 은행 거래내역 파일 (CSV, XLS, XLSX 등의 형식, 50MB 이하). (여러 계좌의 파일을 순차적으로 또는 동시에 업로드 가능해야 함)

            - 파일 내 포함될 것으로 예상되는 데이터 컬럼: 거래일시, 거래 내용(적요), 입금액, 출금액, 잔액, 거래처 정보 등 (은행마다 다를 수 있음).

        - **출력:**

            - 프로그램 내부에서 일관되게 처리 가능한 정형화된 거래내역 데이터 목록 (예: 각 거래는 [계좌 식별자, 거래일시, 내용, 입금액, 출금액, 지출/수입 구분] 등의 표준화된 필드를 가짐).

            - 파싱 과정에서 발생한 오류 정보 (있는 경우).

## 2.2. 기능 2: AI 기반 거래내역 자동 분류 제안 및 사용자 확인/수동 지정

- 기능 이름: **AI 기반 거래내역 자동 분류 제안 및 사용자 확인/수동 지정**

  - **설명:** 파싱된 거래내역을 사용자에게 친숙한 인터페이스(스프레드시트 형식)으로 보여주고, 각 거래에 대해 AI가 자동으로 추천하는 지출/수입 카테고리를 제시하거나, 사용자가 직접 '계좌 간 이체 (분석 제외)' 등 특정 항목으로 지정할 수 있도록 합니다. 사용자는 AI의 제안을 확인, 수정하거나 직접 입력하여 카테고리를 확정하며, 이 과정은 AI의 개인화 학습에 기여합니다. 사용자의 실수를 방지하기 위해 마지막 확정 작업을 되돌릴 수 있는 기능을 포함합니다. **OpenAI API 사용이 불가능한 환경(예: 인터넷 연결 없음, API 키 오류 등)에서도 사용자는 모든 거래 내역을 수동으로 분류하고 확정할 수 있어야 합니다.**
  - **사용자 시나리오:**

    1. 사용자가 성공적으로 거래내역 파일을 업로드하면(기능 2.1 완료), 시스템은 파싱된 거래내역을 '분류 작업 창'에 표시합니다.
    2. 첫 번째 (또는 아직 분류되지 않은 첫 번째) 거래 내역 행이 하이라이트되거나 자동으로 선택됩니다.
    3. (API 사용 가능 시) AI는 해당 거래 내역의 '내용(적요)' 문자열과 기타 정보(금액 등)를 분석하고, 기존에 축적된 사용자 학습 데이터베이스 및 기본 카테고리 정보를 참조하여 최적의 카테고리를 추천합니다. (예: 거래내역 "GS25강남점", AI 추천 카테고리 "지출 > 식비 > 간식", AI 신뢰도 "높음"으로 해당 셀이 초록색으로 표시됨)
    4. 사용자는 AI가 제안한 카테고리를 검토하거나, (API 사용 불가 시 또는 AI 제안이 없을 경우) 직접 카테고리를 선택하거나, 해당 거래가 '계좌 간 이체'라고 판단되면 직접 해당 항목을 선택합니다.
       - AI 제안이 정확하다고 판단되면, 사용자는 "예(Y)" 버튼을 클릭하거나 관련 단축키를 누릅니다.
       - AI 제안이 부정확하거나 다른 카테고리로 변경하고 싶으면, 사용자는 "아니요(N)" 버튼을 클릭하거나, 드롭다운 목록에서 다른 카테고리(예: "지출 > 생활용품", "수입 > 근로소득 > 급여" 또는 **"계좌 간 이체 (분석 제외)"**)를 직접 선택합니다. (MVP에서는 제공된 기본 카테고리 내에서 선택)
    5. 시스템은 사용자의 선택(확정 또는 수정)을 해당 거래 내역의 최종 카테고리로 반영합니다. '계좌 간 이체 (분석 제외)'로 선택된 경우, 해당 거래는 분석 제외 대상으로 표시됩니다.
    6. 만약 사용자가 직전에 확정하거나 수정한 카테고리 선택을 취소하고 싶다면, "실행 취소(Undo)" 버튼을 클릭하거나 관련 단축키(예: Ctrl+Z)를 누릅니다.
    7. 다음 미분류 거래 내역으로 포커스가 자동으로 이동하거나, 사용자가 수동으로 다음 항목을 선택하여 3\~6단계를 반복합니다. (실행 취소 후에는 이전 항목으로 돌아갈 수 있어야 함)
    8. 사용자는 분류 작업 중 언제든지 "중간 저장" 버튼을 클릭하여 현재까지의 작업 내용을 저장하고 나중에 이어서 할 수 있습니다.

  - **시스템 반응:**

    1. (거래내역 표시 시) 시스템은 각 거래 내역을 날짜, 내용, 금액, AI 추천 카테고리, 사용자 확정 카테고리 등의 열을 가진 스프레드시트 형태로 '분류 작업 창'에 표시합니다. (API 사용 가능 시) AI 추천 카테고리 셀은 AI의 신뢰도(높음/중간/낮음)에 따라 각각 다른 배경색(예: 초록/노랑/빨강 - '신호등 시스템')으로 시각적 피드백을 제공합니다. "실행 취소" 버튼 또는 메뉴 항목을 사용 가능하도록 표시합니다. 카테고리 선택 옵션에는 기본 제공 카테고리 목록(`3.2.5` 참조) 및 "계좌 간 이체 (분석 제외)" 항목이 포함됩니다.
    2. (AI 카테고리 제안 시 - API 사용 가능 시)
       - 시스템은 현재 선택된 거래 내역 정보를 AI 엔진(예: ChatGPT API 연동 모듈 + 로컬 학습 데이터베이스 참조 로직)에 전달하여 카테고리 추천을 요청합니다.
       - AI 엔진으로부터 받은 추천 카테고리 및 신뢰도 정보를 UI(AI 추천 카테고리 셀 및 배경색)에 즉시 업데이트합니다.
       - (API 사용 불가 또는 오류 시) AI 추천 카테고리 필드는 비워두거나 "AI 추천 불가" 메시지를 표시하고, 사용자가 직접 카테고리를 선택하도록 유도합니다.
    3. (사용자가 "예(Y)" 선택 또는 일반 카테고리 수동 선택/입력 시)
       - 시스템은 선택/입력된 카테고리를 해당 거래의 '사용자 확정 카테고리'로 기록합니다. (내부적으로는 해당 카테고리의 ID를 저장)
       - 이 확정 정보(거래내역 패턴 + 확정 카테고리 ID)를 로컬 학습 데이터베이스에 긍정적 피드백으로 저장하거나 기존 정보의 가중치를 강화합니다. (실행 취소 기능을 고려하여, 실제 DB 반영은 약간의 지연을 두거나, 취소 시 DB 복구 로직 포함)
       - 해당 거래 내역 행의 분류 상태를 '완료'로 시각적으로 표시합니다.
    4. (사용자가 "계좌 간 이체 (분석 제외)" 선택 시)
       - 시스템은 해당 거래를 "계좌 간 이체 (분석 제외)"로 기록하고, 분석 제외 대상으로 플래그합니다.
       - 이 정보는 로컬 학습 데이터베이스에 기록될 수 있으나, 일반적인 소비/수입 카테고리와는 다르게 처리됩니다.
       - 해당 거래 내역 행의 분류 상태를 '계좌 간 이체' 또는 '분석 제외'로 시각적으로 표시합니다.
    5. (사용자가 "실행 취소(Undo)" 선택 시)
       - 시스템은 가장 최근에 수행된 카테고리 확정/수정 작업을 이전 상태로 되돌립니다.
       - '사용자 확정 카테고리'는 이전 값(또는 AI의 초기 제안 상태, 또는 미분류 상태)으로 복원됩니다.
       - 만약 해당 작업이 로컬 학습 데이터베이스에 이미 반영되었다면, 그 변경 사항도 함께 되돌리거나 수정합니다.
       - UI(해당 거래 내역 행의 표시 내용, AI 제안 상태 등)도 이전 상태로 복원됩니다.
       - 실행 취소 후에는 이전 작업 항목(행)으로 포커스가 이동될 수 있습니다.
    6. (다음 거래 내역으로 이동 또는 모든 항목 분류 완료 시)
       - 시스템은 다음 미분류 항목으로 스크롤하거나 포커스를 이동시키고, 해당 항목에 대한 AI 제안 프로세스를 다시 시작합니다.
       - 모든 항목이 성공적으로 분류되면, 사용자에게 "모든 거래내역 분류가 완료되었습니다."와 같은 알림 메시지를 표시할 수 있습니다.
    7. (사용자가 "중간 저장" 선택 시) 시스템은 현재까지의 분류 진행 상황(어떤 거래가 어떤 카테고리로 확정되었는지, 원본 파일 정보, 마지막 작업 위치 등)을 로컬 저장소에 안전하게 저장합니다.

  - **필요한 정보/데이터:**

    * **입력:**

      * 기능 2.1로부터 전달받은 정형화된 거래내역 데이터 목록 (미분류 또는 부분 분류 상태).

      * AI 카테고리 분류를 위한 로컬 학습 데이터베이스 (사용자 피드백이 누적된 데이터).

      * 사용자의 인터랙션 데이터 (Y/N 클릭, 카테고리 드롭다운 선택(이때 "계좌 간 이체 (분석 제외)" 포함), 실행 취소 클릭).

      * 프로그램에 내장된 기본 카테고리 목록 (트리 구조, 각 항목은 고유 ID 가짐).

    * **출력:**

      * 각 거래 내역에 대해 사용자가 최종적으로 확정한 카테고리 ID 정보 (일반 카테고리 또는 "계좌 간 이체 (분석 제외)" 등의 특수 태그).

      * 새롭거나 강화된 학습 정보가 반영된 로컬 학습 데이터베이스 (실행 취소 시 복원될 수 있도록 관리).

      * 분류 작업 진행 상태 및 UI 표시용 데이터.

## 2.3. 기능 3: 계좌 간 이체 내역 자동 식별 및 처리

* 기능 이름: **계좌 간 이체 내역 자동 식별 및 처리**

  * **설명:** 사용자가 여러 계좌의 거래내역을 업로드했을 경우, 프로그램이 자동으로 또는 사용자의 요청에 의해 계좌 간 자금 이동으로 보이는 거래들을 식별합니다. 사용자의 확인을 거쳐 해당 거래들을 '계좌 간 이체 (분석 제외)'로 표시하고, 이는 실제 수입/지출 분석에서 제외되어 보다 정확한 가계 분석을 돕습니다. (이 기능은 사용자가 직접 개별 거래를 '계좌 간 이체 (분석 제외)'로 분류하는 기능(2.2)을 보조합니다.)

  * **사용자 시나리오:**

    1. 사용자가 두 개 이상의 계좌에 대한 거래내역 파일을 모두 업로드하고, 기본적인 카테고리 분류 작업(기능 2.2)을 일부 진행했거나 완료한 상태입니다.

    2. 사용자가 프로그램 내 "계좌 간 이체 자동 찾기" 버튼을 클릭하거나, 시스템이 파일 업로드 완료 후 (또는 주기적으로) "계좌 간 이체로 의심되는 거래를 찾아볼까요? 정확한 식별을 위해 해당 기간의 모든 관련 계좌 정보를 업로드하시는 것이 좋습니다."와 같은 안내 메시지와 함께 기능 실행을 제안할 수 있습니다.

    3. (최초 실행 시 또는 설정 변경 시) 사용자는 계좌 간 이체로 간주할 거래들의 시간 차이 허용 범위(예: 기본값 5분, 사용자가 1분 \~ 60분 사이로 설정 가능)를 설정 화면에서 지정할 수 있습니다.

    4. 시스템은 업로드된 모든 계좌의 거래내역 데이터를 비교하여, 설정된 시간 허용 범위 내에서 동일한 금액의 '출금' 거래와 '입금' 거래 쌍을 찾아 사용자에게 목록 또는 개별 건으로 제시합니다. (예: "A계좌에서 2023-10-27 10:05에 1,000,000원 출금 / B계좌에 2023-10-27 10:08에 1,000,000원 입금 내역이 있습니다. 계좌 간 이체로 처리할까요?")

    5. 사용자는 제시된 각 거래 쌍에 대해 "예 (계좌 간 이체로 처리)" 또는 "아니요 (별개의 거래임)" 버튼을 클릭합니다.

    6. 모든 잠재적 이체 거래 쌍에 대한 확인 작업이 완료됩니다.

  - **시스템 반응:**

    1. (사용자가 "계좌 간 이체 자동 찾기" 기능 실행 또는 시스템 자동 제안 수락 시) 시스템은 현재 로드된 모든 계좌의 거래내역 데이터를 대상으로, 사용자가 설정한 시간 허용치 내에서 동일한 금액의 출금 거래와 입금 거래가 쌍을 이루는지 검색합니다. 이 때, 이미 사용자가 직접 '계좌 간 이체 (분석 제외)'로 지정한 거래는 검색 대상에서 제외할 수 있습니다.

    2. 검색된 잠재적 계좌 간 이체 거래 쌍들을 사용자에게 명확한 형태로 표시합니다. (예: 출금 계좌 정보, 출금 시간, 출금액 / 입금 계좌 정보, 입금 시간, 입금액을 나란히 보여주거나, 관련 거래 행들을 하이라이트)

    3. (사용자가 특정 거래 쌍에 대해 "예" 선택 시)

       * 시스템은 해당 출금 거래 내역과 입금 거래 내역 모두에 "계좌 간 이체 (분석 제외)"라는 특별한 태그 또는 상태를 지정합니다. 카테고리 열에 "계좌 간 이체 (분석 제외)"로 자동 입력될 수 있습니다.

       * 이 거래들은 '분류 작업 창'에서도 시각적으로 구분될 수 있도록 표시합니다.

       * 이 거래들은 향후 가계부 분석 리포트(예: 월별 지출 합계, 수입 합계) 계산 시 합산 대상에서 제외됩니다.

    4. (사용자가 특정 거래 쌍에 대해 "아니요" 선택 시) 해당 출금 거래와 입금 거래는 일반 거래로 유지되며, 기능 2.2에서 정의된 카테고리 분류 규칙을 따릅니다.

    5. 모든 잠재적 이체 거래 쌍에 대한 사용자 확인이 완료되면, 시스템은 "계좌 간 이체 내역 처리가 완료되었습니다."와 같은 메시지를 표시합니다.

  - **필요한 정보/데이터:**

    * **입력:**

      * 기능 2.1로부터 전달받은, 여러 계좌를 포함할 수 있는 정형화된 거래내역 데이터 목록 (각 거래는 어느 계좌에서 발생했는지 식별 가능해야 함).

      * 사용자가 설정한 계좌 간 이체 판별을 위한 시간 차이 허용 범위 (분 단위, 기본값 제공).

      * 사용자의 각 거래 쌍에 대한 확인 응답 (예/아니요).

    * **출력:**

      * "계좌 간 이체 (분석 제외)"로 특별히 태그/상태가 지정된 거래 내역들.

      * 업데이트된 전체 거래내역 데이터 목록 (계좌 간 이체로 처리된 항목들은 분석 제외 대상으로 표시됨).

## 2.4. 기능 4: 가계부 데이터 시각화 (대시보드)

* 기능 이름: **가계부 데이터 시각화 (대시보드)**

  * **설명:** 사용자가 분류한 가계부 데이터를 바탕으로 월별/연도별 수입 및 지출 현황, 카테고리별 지출 비중 등 주요 금융 정보를 한눈에 파악할 수 있도록 차트, 표 등의 시각적인 형태로 제공합니다. 사용자는 기간 및 카테고리별 필터링을 통해 원하는 정보만 선택적으로 조회할 수 있습니다.

  * **사용자 시나리오:**

    1. 사용자가 거래내역 분류 작업을 완료했거나, 일부라도 분류된 데이터가 있는 상태에서 프로그램 내 "대시보드 보기", "월별 리포트", "소비 분석" 등의 메뉴를 선택합니다.

    2. 대시보드 화면(또는 별도의 창)이 나타나며, 기본적으로 현재 월 또는 최근 월의 가계부 요약 정보(예: 총수입, 총지출, 순이익/손실, 카테고리별 지출 TOP 5 원형 차트, 월별 수입/지출 추이 막대그래프 등)가 표시됩니다.

    3. 사용자는 화면에 제공된 기간 선택 도구(예: 연도 선택 드롭다운, 월 선택 버튼 그룹, 달력 컨트롤)를 사용하여 조회하고 싶은 특정 기간(예: 특정 연도, 특정 월, 사용자 지정 기간)의 데이터를 선택합니다.

    4. 사용자는 화면에 제공된 필터링 옵션(예: 카테고리 목록 체크박스, 수입/지출 선택 버튼)을 사용하여 특정 카테고리의 데이터만 보거나, 수입 또는 지출 내역만 따로 볼 수 있습니다.

    5. 사용자는 화면에 표시된 다양한 차트(예: 월별 지출 추이 선 그래프, 카테고리별 지출 비중 원형 차트, 주요 지출 항목 막대그래프)와 표(상세 거래 내역 목록 등)를 통해 직관적으로 자신의 소비 및 수입 패턴을 이해합니다.

    6. (선택 사항) 사용자는 현재 보고 있는 대시보드의 특정 부분(예: 차트)을 이미지 파일로 저장하거나, 전체 리포트를 인쇄할 수 있는 기능을 사용합니다.

  * **시스템 반응:**

    1. (사용자가 대시보드 메뉴 선택 시) 시스템은 로컬 저장소에서 확정된 카테고리 및 금액 정보가 포함된 전체 거래내역 데이터베이스를 읽어옵니다.

    2. (초기 대시보드 화면 로드 시)

       * 시스템은 기본 설정된 기간(예: 현재 월 또는 가장 최근 데이터가 있는 월)의 데이터를 기준으로 총수입, 총지출 등을 계산합니다. (이때 '계좌 간 이체 (분석 제외)'로 표시된 항목은 수입/지출 합계 계산에서 제외됩니다.)

       * 주요 카테고리별 지출액 및 비중을 계산합니다.

       * 계산된 데이터를 바탕으로 다양한 차트(원형, 막대, 선 등)와 요약 정보(텍스트, 표) 형태로 화면에 표시합니다.

    3. (사용자가 기간 변경 시) 시스템은 선택된 새로운 기간에 해당하는 데이터를 데이터베이스에서 다시 필터링하고 집계하여, 대시보드에 표시된 모든 차트와 요약 정보를 즉시 업데이트합니다.

    4. (사용자가 카테고리 또는 수입/지출 필터링 시) 시스템은 적용된 필터 조건에 따라 데이터를 추출하고 재계산하여 대시보드 내용을 동적으로 업데이트합니다.

    5. (사용자가 차트와 상호작용 시 - 선택적 고급 기능) 예를 들어, 사용자가 원형 차트의 특정 카테고리 부분을 클릭하면, 해당 카테고리의 상세 거래 내역 목록을 보여주거나 관련 추이 그래프로 드릴다운(drill-down) 기능을 제공할 수 있습니다.

    6. (사용자가 화면 저장 또는 인쇄 요청 시 - 선택적 기능)

       * "이미지로 저장": 시스템은 현재 대시보드 화면 또는 선택된 차트 영역의 스크린샷을 생성하여 PNG, JPG 등의 이미지 파일 형식으로 저장할 수 있도록 파일 저장 대화상자를 제공합니다.

       * "인쇄": 시스템은 현재 대시보드 내용을 인쇄하기 적합한 형태로 변환하여 운영체제의 인쇄 미리보기 및 인쇄 대화상자를 제공합니다.

  * **필요한 정보/데이터:**

    * **입력:**

      * 기능 2.2 및 2.3을 통해 확정된 카테고리 및 금액 정보가 포함된 전체 거래내역 데이터베이스 ('계좌 간 이체 (분석 제외)'로 태그된 항목은 분석 시 특별 처리).

      * 사용자의 기간 선택 정보 (조회 시작일/종료일, 특정 연/월 등).

      * 사용자의 카테고리 필터링 정보 (선택된 카테고리 목록 등).

      * 사용자의 수입/지출 필터링 정보.

    * **출력:**

      * 화면에 표시될 시각화된 가계부 정보 (HTML/CSS/JavaScript로 렌더링된 차트, 표 데이터, 요약 텍스트).

      * (선택 사항) 이미지 파일 (PNG, JPG 등) 또는 인쇄물 형태의 보고서.

## 2.5. 기능 5: 기본 설정 및 관리

* 기능 이름: **기본 설정 및 관리**

  * **설명:** 프로그램의 주요 동작 방식을 사용자가 직접 설정하고, 중요한 데이터를 관리(API 키, AI 학습 데이터, 백업/복원, 내보내기)할 수 있는 기능을 제공합니다. 이를 통해 사용자 경험을 최적화하고 데이터의 안정성을 확보합니다.

  * **주요 설정 항목 및 동작:**

    * **A. 계좌 간 이체 자동 식별 설정:**

      * **설명:** `2.3. 기능 3`에서 사용되는 계좌 간 이체 자동 식별 시의 시간 차이 허용 범위를 사용자가 직접 설정합니다.

      * **사용자 시나리오:**

        1. 사용자가 프로그램의 "설정" 메뉴(또는 아이콘)를 클릭하여 "설정 창"을 엽니다.

        2. 설정 창 내 "계좌 간 이체 설정" (또는 "거래 설정") 탭 또는 섹션으로 이동합니다.

        3. "시간 차이 허용 범위" 항목에서 원하는 시간(예: 1분부터 60분까지의 범위)을 입력하거나 드롭다운 메뉴, 또는 슬라이더를 통해 선택하고 "저장" (또는 "적용") 버튼을 클릭합니다.

      * **시스템 반응:**

        1. 시스템은 사용자가 설정한 시간 값을 내부 설정에 저장하고, 이후 `2.3. 기능 3` 실행 시 해당 값을 기준으로 계좌 간 이체를 식별합니다.

        2. 만약 사용자가 유효하지 않은 값(예: 0분 이하, 또는 너무 큰 값)을 입력하려고 하면, 시스템은 "유효한 시간 범위를 입력해주세요."와 같은 오류 메시지를 표시하고 변경사항을 저장하지 않습니다.

      * **필요한 정보/데이터:**

        * 입력: 사용자가 설정한 시간 값 (분 단위).

        * 출력/저장: 프로그램 설정에 저장된 시간 차이 허용 범위 값.

    * **B. AI 학습 데이터 관리 (버전 관리 및 롤백):**

      * **설명:** 사용자의 피드백으로 누적된 AI 학습 데이터베이스를 특정 시점의 버전으로 관리하며, 사용자가 원하는 이전 버전으로 롤백할 수 있는 기능을 제공하여 AI의 분류 정확도에 대한 사용자 제어권을 강화합니다.

      * **사용자 시나리오:**

        1. 사용자가 "설정" 창의 "AI 학습 데이터 관리" (또는 "AI 설정") 탭 또는 섹션으로 이동합니다.

        2. 시스템은 저장된 AI 학습 데이터 버전 목록(예: 생성 날짜/시간, 간단한 설명 또는 자동 생성된 버전 ID)을 최근 순으로 표시하며, 현재 활성화된 버전이 명확히 구분되어 보입니다. (예: 최근 10\~20개 버전 유지)

        3. 사용자가 목록에서 특정 이전 버전을 선택하고 "이 버전으로 롤백하기" 버튼을 클릭합니다.

        4. 시스템은 "선택하신 \[버전 정보\]으로 AI 학습 데이터를 되돌리시겠습니까? 너무 크게 걱정하지 마세요. 그때도 꽤나 똑똑했답니다. 다만, 현재까지의 최신 학습 내용은 해당 시점으로 돌아가며, 이후의 학습 내용은 사라집니다."와 같은 확인 메시지를 표시합니다.

        5. 사용자가 "확인" 버튼을 클릭하면 롤백 작업이 진행됩니다.

      * **시스템 반응:**

        1. 시스템은 AI 학습 데이터베이스에 중요한 변경이 있거나 특정 조건(예: 프로그램 종료 시, 일정 수 이상의 거래 분류 완료 시, 또는 사용자의 수동 스냅샷 생성 요청 시)에 따라 현재 학습 데이터의 스냅샷(버전)을 자동으로 또는 수동으로 생성하여 안전하게 저장합니다. 저장 시 용량 관리를 위해 오래된 버전은 자동으로 삭제될 수 있습니다(예: 최대 N개 버전 유지).

        2. 사용자의 롤백 요청 및 확인이 있을 경우, 시스템은 선택된 버전의 AI 학습 데이터로 현재 사용 중인 학습 데이터를 대체(복원)합니다.

        3. 롤백 작업이 완료되면, 사용자에게 "AI 학습 데이터가 선택하신 버전으로 성공적으로 롤백되었습니다." 와 같은 완료 메시지를 표시합니다.

        4. 이후 AI 기반 카테고리 분류(기능 2.2) 시에는 롤백된 학습 데이터를 기준으로 추천이 이루어집니다.

      * **필요한 정보/데이터:**

        * 입력: 사용자의 롤백 대상 버전 선택, 롤백 실행 확인.

        * 출력/관리: 버전별 AI 학습 데이터베이스 스냅샷 파일 또는 데이터, 현재 프로그램이 사용하고 있는 AI 학습 데이터.

    * **C. 데이터 자동 백업 및 수동 복원:**

      * **설명:** 사용자의 전체 가계부 데이터(모든 거래 내역, 분류 정보, AI 학습 데이터, 각종 설정값 등)를 프로그램 시작 또는 종료 시 자동으로 백업하되, 변경 사항이 있을 경우에만 백업을 수행합니다. 필요한 경우 사용자가 특정 백업 시점의 데이터로 수동 복원할 수 있는 기능을 제공하여 데이터 유실 위험을 최소화합니다. 백업 진행 중에는 사용자에게 진행 상황을 알리고 프로그램 사용을 일시적으로 제한합니다.

      * **사용자 시나리오 (자동 백업):**

        1. 사용자가 프로그램을 정상적으로 시작하거나 종료합니다.

      * **사용자 시나리오 (수동 복원):**

        1. 사용자가 "설정" 창의 "데이터 관리" 또는 "백업/복원" 탭으로 이동합니다.

        2. "데이터 복원하기" 옵션을 선택하면, 시스템은 사용 가능한 백업 목록(백업 날짜 및 시간 기준)을 사용자에게 보여줍니다.

        3. 사용자가 목록에서 복원을 원하는 특정 백업 시점을 선택하고 "복원 실행" 버튼을 클릭합니다.

        4. 시스템은 "데이터 복원 시 현재 작업 내용은 선택하신 백업 시점으로 모두 변경됩니다. 계속하시겠습니까?"와 같은 경고 메시지를 표시하여 사용자 재확인을 받습니다.

        5. 사용자가 "확인"을 클릭하면 복원 작업이 시작됩니다.

      * **시스템 반응 (자동 백업):**

        1. 프로그램 시작 시 또는 종료 시, 시스템은 마지막 백업 이후 데이터에 변경 사항이 있었는지 확인합니다.

        2. 변경 사항이 있을 경우에만, 현재 애플리케이션의 모든 중요 데이터(거래내역, AI 학습 DB, 설정 등)를 지정된 로컬 경로(예: 사용자 문서 폴더 내 프로그램 전용 폴더 또는 숨김 폴더)에 백업 파일(예: 타임스탬프가 포함된 압축 파일 또는 특정 폴더 구조)로 자동으로 저장합니다. 백업 진행 중에는 화면에 백업 진행률(예: \[첨부 이미지와 유사한 프로그레스 바\] 90%)을 표시하고, 프로그램의 다른 기능 사용을 일시적으로 비활성화(예: 화면 전체 회색 음영 처리)합니다.

        3. 시스템은 백업 파일의 개수를 관리하여, 가장 최근 10개의 백업만 유지하고, 그보다 오래된 백업은 자동으로 삭제합니다.

      * **시스템 반응 (수동 복원):**

        1. 시스템은 저장된 백업 목록을 사용자에게 제시합니다.

        2. 사용자의 최종 확인 후, 선택된 백업 파일의 내용으로 현재 프로그램의 모든 관련 데이터를 대체(덮어쓰기)합니다.

        3. 복원 작업이 완료되면, "데이터가 선택하신 시점으로 성공적으로 복원되었습니다. 프로그램을 다시 시작합니다." 와 같은 메시지를 표시하고 프로그램을 재시작하거나, 변경사항 즉시 반영을 시도합니다.

      * **필요한 정보/데이터:**

        * 입력: 사용자의 롤백 대상 백업 시점 선택, 복원 실행 최종 확인.

        * 출력/관리: 주기적으로 자동 생성되는 백업 파일들 (최근 10개 유지), 현재 프로그램이 사용하고 있는 모든 사용자 관련 데이터.

    * **D. 분류된 가계부 데이터 내보내기:**

      * **설명:** 사용자가 프로그램 내에서 분류하고 정리한 모든 가계부 거래내역 데이터를 CSV 파일 형식으로 기본 경로에 자동 저장 방식으로 내보내어, 사용자가 다른 용도로 활용하거나 별도로 보관할 수 있도록 합니다.

      * **사용자 시나리오:**

        1. 사용자가 프로그램의 "파일" 메뉴 또는 "데이터 관리" 섹션에서 "데이터 내보내기" (또는 "CSV로 저장") 옵션을 선택합니다.

      * **시스템 반응:**

        1. 시스템은 현재까지 입력되고 분류된 모든 가계부 데이터(거래내역 원본 정보 및 사용자가 확정한 카테고리 포함, '계좌 간 이체 (분석 제외)' 항목은 제외)를 데이터베이스에서 조회합니다.

        2. 조회된 데이터를 CSV 파일 형식의 구조에 맞게 변환합니다.

        3. 변환된 데이터를 미리 지정된 기본 다운로드 폴더에 "가계부데이터\_YYMMDD.csv" (YYMMDD는 현재 날짜) 형식의 파일명으로 자동으로 저장합니다. (별도의 파일 저장 대화상자 없이 즉시 저장)

        4. 내보내기 작업이 완료되면, "가계부 데이터를 \[저장된 경로\]/가계부데이터\_YYMMDD.csv 로 성공적으로 내보냈습니다." 와 같은 메시지를 사용자에게 표시합니다.

      * **필요한 정보/데이터:**

        * 입력: 사용자의 "데이터 내보내기" 실행 요청.

        * 출력: 기본 경로에 "가계부데이터\_YYMMDD.csv" 형식으로 저장된 CSV 파일.

    * **E. ChatGPT API 키 입력 및 관리:**

      * **설명:** AI 기반 자동 분류 기능을 사용하기 위해 필요한 사용자 개인의 ChatGPT API 키를 안전하게 입력하고 저장하며, 필요시 수정하거나 삭제할 수 있도록 관리합니다. API 키 관련 문제 발생 시 적절한 안내를 제공합니다.

      * **사용자 시나리오:**

        1. 프로그램 최초 실행 시 또는 API 키가 아직 설정되지 않은 상태에서 AI 분류 기능을 사용하려고 할 때, 시스템은 API 키 입력을 안내하는 메시지나 설정 화면으로 자동 이동을 제안합니다. 또는 사용자가 직접 "설정" 창의 "API 키 관리" (또는 "AI 설정") 탭으로 이동합니다.

        2. 사용자는 자신의 ChatGPT API 키를 제공된 입력 필드에 입력(또는 붙여넣기)합니다.

        3. 사용자는 "API 키 저장" 버튼을 클릭합니다. (선택적으로 "연결 테스트" 버튼을 제공하여 키 유효성을 미리 확인할 수 있습니다.)

        4. (선택 사항) 이미 저장된 API 키가 있는 경우, 사용자는 이를 수정하거나 "API 키 삭제" 버튼을 통해 저장된 키를 제거할 수 있습니다.

        5. AI 분류 기능 사용 중 API 관련 오류가 발생하면, 시스템으로부터 안내 메시지를 받습니다.

      * **시스템 반응:**

        1. 사용자가 입력한 API 키는 로컬 시스템에 일반 텍스트 형태로 저장됩니다. (MVP에서는 암호화 제외, 사용자의 책임 하에 관리)

        2. ("연결 테스트" 버튼 클릭 시 - 선택적) 시스템은 입력된 API 키를 사용하여 ChatGPT API에 간단한 테스트 호출을 시도하고, 그 결과를 사용자에게 "API 키가 유효합니다." 또는 "API 키가 유효하지 않거나 연결에 실패했습니다. 다시 확인해주세요." 와 같이 알려줍니다.

        3. API 키가 성공적으로 저장(및 유효성 검증)된 이후부터, 프로그램은 `2.2. 기능 2` (AI 기반 자동 분류) 실행 시 이 저장된 키를 사용하여 ChatGPT API와 통신합니다.

        4. 만약 저장된 API 키가 없거나 유효하지 않은 것으로 판명되면, AI 기반 자동 분류 기능은 제한되거나 사용 불가능함을 사용자에게 명확히 안내합니다.

        5. 프로그램이 ChatGPT API 호출 시 API 키 관련 문제(예: 유효하지 않은 키, 잔액 부족, 인증 실패 등)로 오류가 발생하면, 시스템은 "AI 서비스 연결에 문제가 발생했습니다. API 키가 만료되었거나, 계정의 사용량(Credit)이 모두 소진되었는지 확인해주세요. 설정에서 API 키를 다시 확인하거나 업데이트할 수 있습니다." 와 같은 구체적인 안내 메시지를 사용자에게 표시하고, 필요한 경우 설정 화면으로 바로 갈 수 있는 링크를 제공합니다.

      * **필요한 정보/데이터:**

        * 입력: 사용자가 제공하는 ChatGPT API 키 문자열.

        * 출력/저장: 로컬 시스템에 저장된 API 키. API 키 유효성 검사 결과 (UI 표시용). API 오류 발생 시 사용자 안내 메시지.
    * **F. 프로그램 데이터 전체 초기화 (공장 초기화):**
        - **설명:** 사용자가 프로그램 내 모든 개인 데이터(거래 내역, AI 학습 데이터, 설정값 등 백업 파일 제외)를 완전히 삭제하고 프로그램을 처음 설치한 상태로 되돌릴 수 있는 기능을 제공합니다. 의도치 않은 데이터 삭제를 방지하기 위해 강력한 확인 절차를 포함합니다.
        - **사용자 시나리오:**
            1. 사용자가 "설정" 창의 "데이터 관리" 또는 "고급 설정" 탭으로 이동합니다.
            2. "프로그램 데이터 전체 초기화" (또는 "공장 초기화") 버튼을 클릭합니다.
            3. 시스템은 "정말로 모든 데이터를 삭제하고 프로그램을 초기 상태로 되돌리시겠습니까? 이 작업은 되돌릴 수 없으며, 모든 거래 내역, AI 학습 내용, 설정이 사라집니다. 백업 파일은 삭제되지 않습니다."와 같은 1차 경고 메시지와 함께 확인 체크박스(예: "위험을 인지했으며, 모든 데이터 삭제에 동의합니다.")를 표시합니다.
            4. 사용자가 체크박스를 선택한 후 "초기화 진행" 버튼을 클릭합니다.
            5. 시스템은 2차 확인을 위해 "데이터를 완전히 삭제하려면 아래 입력창에 '모두삭제합니다' 라고 정확히 입력해주세요." 와 같은 메시지와 함께 텍스트 입력창을 표시합니다.
            6. 사용자가 해당 문구를 정확히 입력하고 "최종 확인 및 초기화" 버튼을 클릭합니다.
        - **시스템 반응:**
            1. 사용자의 2단계 확인(체크박스 및 특정 문구 입력)이 모두 완료되면, 시스템은 SQLite 데이터베이스 파일 내 사용자 관련 테이블(거래내역, AI 학습 패턴, 설정값 등)의 모든 데이터를 삭제하거나, 데이터베이스 파일 자체를 삭제 후 새로운 빈 파일로 재생성합니다. (기본 카테고리 정보는 유지하거나 재생성합니다.)
            2. API 키 정보도 삭제합니다.
            3. 로컬에 저장된 AI 학습 데이터 버전 스냅샷도 모두 삭제합니다. (단, 사용자가 별도로 관리하는 백업 폴더의 내용은 삭제하지 않습니다.)
            4. 초기화 작업이 완료되면, "프로그램 데이터가 성공적으로 초기화되었습니다. 프로그램을 다시 시작합니다."와 같은 메시지를 표시하고 프로그램을 재시작하거나, 초기 설정 화면으로 안내합니다.
        - **필요한 정보/데이터:**
            - 입력: 사용자의 초기화 의사 확인 (체크박스, 특정 문구 입력).
            - 출력/효과: 모든 사용자 데이터 삭제 (백업 파일 제외), 프로그램 초기 상태로 복귀.
    * **G. 파일 형식 안내 팝업 표시 여부 설정:**
        - **설명:** `2.1. 기능 1`에서 언급된 "올바른 파일 형식 안내" 팝업 메시지(예시 이미지 포함)의 표시 여부를 사용자가 설정에서 제어할 수 있도록 합니다.
        - **사용자 시나리오:**
            1. 사용자가 "설정" 창의 "일반" 또는 "파일 설정" 탭으로 이동합니다.
            2. "파일 불러오기 시 형식 안내 팝업 표시" 체크박스를 선택하거나 해제합니다.
        - **시스템 반응:**
            - 체크박스 선택 시: `2.1`의 시나리오대로 파일 불러오기 시 안내 팝업이 표시됩니다.
            - 체크박스 해제 시: 파일 불러오기 시 안내 팝업이 표시되지 않습니다. (단, 파일 형식 오류 발생 시에는 관련 오류 메시지가 정상적으로 표시됩니다.)
        - **필요한 정보/데이터:**
            - 입력: 사용자의 체크박스 선택/해제.
            - 출력/저장: 팝업 표시 여부 설정값.

## 2.6. (기타 필요한 기능들을 위와 같은 형식으로 추가해주세요)

# 3. 기술 사양 (Technical Specifications) - AI와 상의하세요!

## 3.1. 플랫폼 (Platform)

플랫폼:

- **주요 타겟:** 데스크톱 애플리케이션 (로컬 PC 프로그램)

- **운영체제:** 크로스 플랫폼 지원 목표 (최소 macOS 및 Windows 지원)

- **개발 언어/프레임워크:** Python 기반 GUI 프레임워크 (PySide)

## 3.2. 데이터 저장 (Data Storage)

데이터 저장 관련 요구사항:

### 3.2.1. 사용자 거래 내역 데이터 저장 방식
- **저장 매체:** 로컬 SQLite 데이터베이스 파일 (`AISmartLedger.db` 와 같은 단일 파일)
- **저장 내용:** 기능 2.1에서 파싱된 모든 거래 내역 (계좌 식별자, 거래일시, 거래 내용, 입금액, 출금액, 사용자 확정 카테고리 ID, '계좌 간 이체' 여부 플래그, 원본 CSV 파일명/행 번호 등 추적 정보 포함).
- **구조 (참고용):** `transactions` 테이블 (예: `transaction_id` (PK), `account_id` (FK - `accounts` 테이블 연동), `timestamp`, `description`, `amount_in`, `amount_out`, `category_id` (FK - `categories` 테이블 연동), `is_transfer` BOOLEAN, `source_file`, `source_row_id` 등)

### 3.2.2. AI 학습 데이터 저장 방식
- **저장 매체:** 로컬 SQLite 데이터베이스 파일 (위와 동일한 DB 파일 내 별도 테이블).
- **저장 내용:** 기능 2.2에서 사용자의 카테고리 분류 피드백을 통해 누적된 패턴 정보 (거래 내용 핵심 패턴, 사용자가 확정한 카테고리 ID, 확정 횟수, 신뢰도 점수, 마지막 사용일 등).
- **구조 (참고용):** `ai_learning_patterns` 테이블 (예: `pattern_id` (PK), `text_pattern` TEXT, `assigned_category_id` (FK - `categories` 테이블 연동), `confirmation_count` INTEGER, `last_updated` TIMESTAMP 등)
- **롤백 지원:** 기능 2.5.B에서 정의한 버전 관리 및 롤백 기능을 지원. (애플리케이션 로직 또는 DB 스냅샷 방식으로 구현)

### 3.2.3. 프로그램 설정값 저장 방식
- **저장 매체:** 로컬 SQLite 데이터베이스 파일 (위와 동일한 DB 파일 내 별도 테이블).
- **저장 내용:** 계좌 간 이체 시간 허용 범위, ChatGPT API 키 (사용자의 책임 하에 일반 텍스트로 저장 - MVP에서는 암호화 제외), AI 학습 데이터 현재 활성 버전 정보, 마지막 창 크기/위치 등 사용자 인터페이스 상태 (선택적), 파일 형식 안내 팝업 표시 여부.
- **구조 (참고용):** `settings` 테이블 (예: `setting_key` TEXT (PK), `setting_value` TEXT)

### 3.2.4. 백업 데이터 저장 방식
- **저장 매체:** 사용자 로컬 PC의 지정된 애플리케이션 데이터 폴더 내 'Backups' 하위 폴더 (예: `[사용자 문서 폴더]/AISmartLedger/Backups` 또는 `[애플리케이션 데이터 폴더]/AISmartLedger/Backups`).
- **저장 내용:** 주기적으로 (프로그램 시작 또는 종료 시, 데이터 변경이 있을 경우에만) 또는 사용자가 수동으로 생성한 전체 SQLite 데이터베이스 파일(`AISmartLedger.db`)의 복사본.
- **파일 형식:** 타임스탬프를 포함한 파일명 (예: `AISmartLedger_backup_YYYYMMDD_HHMMSS.db`). 압축하지 않음.
- **관리:** 가장 최근 10개의 백업 파일만 유지하고, 그보다 오래된 백업은 자동으로 삭제.

### 3.2.5. 기본 카테고리 구조 저장 방식
- **저장 매체:** 로컬 SQLite 데이터베이스 파일 (위와 동일한 DB 파일 내 별도 테이블).
- **저장 내용:** 프로그램에서 기본으로 제공하는 수입/지출 카테고리 목록 및 계층 구조. "계좌 간 이체 (분석 제외)" 항목은 최상위 레벨로 분리하여 관리합니다. (아래 전체 목록 참조)
    ```
    가계부
    ├── 수입
    │   ├── 근로소득
    │   │   ├── 급여
    │   │   ├── 상여
    │   │   ├── 연차수당
    │   │   └── 기타 수당
    │   ├── 사업소득
    │   ├── 재산소득
    │   │   ├── 이자
    │   │   ├── 배당
    │   │   └── 임대료
    │   ├── 이전소득
    │   │   ├── 정부지원금
    │   │   └── 연금
    │   ├── 부수입
    │   │   ├── 보험금
    │   │   ├── 공모주·배당금
    │   │   └── 캐시백·앱테크 수익
    │   ├── 전월이월
    │   └── 저축/보험 (자산관리용)
    ├── 지출
    │   ├── 식비
    │   │   ├── 주식
    │   │   ├── 부식
    │   │   ├── 외식
    │   │   ├── 간식
    │   │   ├── 커피/음료
    │   │   ├── 술/유흥
    │   │   └── 기타
    │   ├── 주거/통신
    │   │   ├── 월세/전세보증금이자·관리비
    │   │   ├── 수도/전기/가스
    │   │   └── 통신비
    │   ├── 생활용품
    │   ├── 의류/미용
    │   ├── 건강/문화
    │   ├── 교육/육아
    │   ├── 교통/차량
    │   ├── 경조사비/회비
    │   ├── 세금/이자
    │   ├── 용돈/기타
    │   ├── 카드대금
    │   └── 저축/보험
    └── 계좌 간 이체 (분석 제외)
    ```
- **구조 (참고용):** `categories` 테이블 (예: `category_id` (PK), `category_name` TEXT, `parent_category_id` (FK - `categories` 테이블의 `category_id` 참조, 최상위 카테고리는 NULL), `type` TEXT (예: '수입', '지출', '이체'), `is_default` BOOLEAN 등)
    - 이 테이블의 `category_id`가 `transactions` 테이블과 `ai_learning_patterns` 테이블의 `category_id` (FK)와 연결됩니다. "계좌 간 이체 (분석 제외)"는 `parent_category_id`가 NULL인 최상위 카테고리이자 특별한 `type`('이체' 또는 '내부이체')으로 관리될 수 있습니다.

### 3.2.6. 일반적인 데이터 관리 요구사항
- **저장 위치 일관성:** 모든 로컬 데이터 파일(SQLite DB, 백업 파일 등)은 사용자 컴퓨터의 명확하고 일관된 위치에 저장되어야 하며, 사용자가 해당 위치를 쉽게 찾거나 (필요시) 변경할 수 있도록 안내 또는 설정 옵션 제공 (후자 선택 사항).
- **데이터 일관성 및 무결성:** SQLite 데이터베이스의 트랜잭션 기능을 적극 활용하여, 데이터 저장, 수정, 삭제 작업 시 발생할 수 있는 오류로부터 데이터베이스의 일관성과 무결성을 보장합니다. (예: 거래내역 저장 중 오류 발생 시 작업 전체 롤백)
- **데이터 보안 (MVP):** 별도의 파일 암호화 기능은 MVP 범위에서 제외합니다. 데이터 파일에 대한 접근 권한은 운영체제의 기본 보안 기능에 의존합니다. (단, API 키는 입력 필드에서 마스킹 처리 등 최소한의 화면상 보안 조치 고려)

## 3.3. 외부 연동 (API/External Services) - 필요하다면

외부 연동 요구사항:

- **연동 대상 서비스:** OpenAI API (ChatGPT 모델 활용)
- **연동 목적:**
    - 사용자가 입력한 거래 내역의 문자열(적요)을 자연어 처리 기술을 활용하여 분석.
    - 분석 결과를 바탕으로 가장 적합한 가계부 카테고리를 자동으로 추천받아 사용자의 분류 작업 편의성 증대.
- **주요 연동 방식 (개념도):**
    ```mermaid
    graph TD
      A["사용자: 분류할 거래 내역 선택 (기능 2.2 UI)"] --> B{"프로그램: AI 추천 요청 준비"};
      B --> C["1.거래 내역 텍스트 추출"];
      B --> D["2.로컬 학습 DB에서 과거 유사 거래의 사용자 분류 이력 조회 (AI 정확도 향상 목적, 규칙 기반 검색, 필요시)"];
      C --> E{"3.API 요청 프롬프트 구성"};
      D --> E;
      E --> F["4.저장된 OpenAI API 키 사용 (기능 2.5.E 설정값)"];
      F --> G["5.OpenAI API (ChatGPT)에 카테고리 추천 요청 전송"];
      G -- 요청 --> H["OpenAI API 서버 (ChatGPT 모델)"];
      H -- "응답 (추천 카테고리, 신뢰도 등)" --> I["6.프로그램: API 응답 수신"];
      I --> J["7.추천 카테고리 및 신뢰도 추출"];
      J --> K["8.분류 작업 화면(기능 2.2 UI)에 AI 추천 결과 표시 (신호등 시스템 적용)"];
      K --> L["사용자: AI 제안 확인/수정/확정 (수동 처리 포함)"];
    
      G -. API 호출 실패 시 .-> M{"오류 처리"};
      M --> N["사용자에게 오류 안내 및 수동 처리 옵션 제공 (예: API 키 문제, 네트워크 오류 등 기능 2.5.E 및 4. 예외 처리 참조)"];
      N --> L;
    ```
- **세부 연동 방식:**
    - 사용자가 `2.5. 기능 5` (기본 설정 및 관리)에서 설정한 개인 OpenAI API 키를 사용하여 인증 및 API 호출.
    - 프로그램은 미리 정의된 프롬프트 템플릿에 현재 거래 내역 텍스트와 로컬 학습 데이터베이스(`ai_learning_patterns` 테이블)에서 조회된 과거 사용자 분류 이력(컨텍스트)을 동적으로 조합하여 API 요청 프롬프트를 구성함. (규칙 기반으로 로컬 DB에서 관련 정보 우선 조회 후, 필요시 GPT API에 전달)
    - API로부터 추천 카테고리(또는 관련 정보), 신뢰도 등의 응답을 수신하여 `2.2. 기능 2` (AI 기반 거래내역 자동 분류 제안 및 사용자 확인/수동 지정)에서 활용.
    - API 호출 빈도, 요청/응답 데이터 크기 등을 고려하여 사용자 API 비용 및 프로그램 응답 성능에 미치는 영향을 최소화하도록 설계 (예: 불필요한 중복 호출 방지, 효율적인 프롬프트 구성).
    - API 연동 관련 오류 발생 시 (예: 잘못된 API 키, 네트워크 연결 문제, API 서비스 자체 오류, 사용량 제한 초과 등) 적절한 사용자 안내 및 오류 처리 수행 (`2.5. 기능 5` 및 `4. 발생 가능한 예외 상황 및 처리` 참조).
- **기타 외부 연동:**
    - 현재 MVP 범위 내에서는 OpenAI API 외 다른 외부 서비스와의 직접적인 연동은 고려하지 않음.

## 3.4. 디자인/UX 관련 간단한 요청 (Design/UX Preferences)

디자인/UX 선호도:
- **전반적인 스타일:**
    - 참고 이미지들(`Dashboard.jpg`, `Classify Transactions.png`, `Settings.jpg` - 사용자가 이전에 제공한 이미지들)과 같이 현대적이고 미니멀한 디자인을 지향합니다.
    - 불필요한 시각적 요소를 최소화하고, 정보 전달과 기능 사용 편의성에 집중합니다.
    - 일관된 색상 팔레트 (예: 차분한 기본색에 파란색 계열을 포인트 컬러로 활용) 및 명확하고 가독성 높은 타이포그래피를 사용하여 전문적이고 신뢰감 있는 느낌을 부여합니다.
    - 충분한 여백 활용으로 사용자가 답답함을 느끼지 않고 쾌적하게 정보를 인지할 수 있도록 합니다.
- **주요 화면 구성:**
    - **대시보드 (Dashboard):** 재정 상황 요약 및 시각화 중심.
    - **거래내역 분류 작업 (Classify Transactions):** AI 기반 분류 및 사용자 확인/수정 인터페이스.
    - **전체 거래내역 (Transactions):** 누적된 모든 (분류 완료) 거래내역 조회, 검색, 수정 화면.
    - **설정 (Settings):** 프로그램 관련 각종 설정.
    - 각 주요 화면 간 이동이 용이하도록 직관적인 네비게이션 시스템(예: 상단 탭 메뉴 또는 좌측 사이드바 메뉴)을 제공합니다.
- **사용자 인터페이스(UI) 요소 및 경험(UX) 원칙:**
    - **거래내역 분류 화면:**
        - 스프레드시트/표 기반 레이아웃으로, 각 행에서 직접적이고 빠른 카테고리 분류 작업을 지원합니다.
        - AI 추천 신뢰도에 따른 '신호등 시스템' (셀 배경색 변경)을 명확하게 적용하여 사용자의 시각적 판단을 돕습니다.
    - **대시보드:**
        - 차트(원형, 막대, 선 등)를 적극 활용하여 데이터를 효과적으로 시각화합니다.
        - 사용자가 기간, 카테고리별로 데이터를 쉽게 필터링하고 조회할 수 있는 직관적인 컨트롤(예: 드롭다운, 버튼)을 제공합니다.
    - **일관성:** 프로그램 전체에서 사용되는 용어, 아이콘, 버튼 스타일, 레이아웃 구조 등을 일관되게 유지하여 사용자의 학습 부담을 줄입니다.
    - **단순함과 명확성:** 모든 기능과 정보는 사용자가 혼란 없이 쉽게 이해하고 사용할 수 있도록 최대한 단순하고 명확하게 설계합니다.
    - **효율성:** 반복적인 작업은 최소한의 단계로 완료할 수 있도록 하고, 주요 기능에 대한 접근성을 높입니다.
    - **피드백:** 사용자의 모든 중요한 행동(예: 저장, 삭제, AI 처리 상태, 오류 발생 등)에 대해 시스템은 명확하고 즉각적인 시각적 또는 텍스트 피드백을 제공합니다.
    - **PC 애플리케이션 특성:** PySide를 활용하되, 현대적인 웹 애플리케이션과 같이 깔끔하고 세련된 느낌의 인터페이스, 특히 세로 스크롤이 자연스러운 레이아웃을 구현합니다.

# 4. 발생 가능한 예외 상황 및 처리 (Edge Cases & Error Handling)

이 섹션에서는 "AI 스마트 가계부" 프로그램 사용 중 발생할 수 있는 다양한 예외 상황과 각 상황에 대한 시스템의 처리 방안을 정의합니다. 목표는 프로그램의 안정성을 확보하고, 사용자에게 명확한 안내를 제공하여 긍정적인 사용자 경험을 유지하는 것입니다.

### 4.1. 파일 입력 및 처리 관련 오류

- **상황 1:** 사용자가 지원하지 않는 파일 형식(예: .txt, .pdf, 이미지 파일 등)의 거래내역 파일을 업로드하려고 시도함.
    - **처리:**
        - 시스템은 파일 확장자를 확인하여 지원 형식(CSV, XLS, XLSX)이 아닐 경우, 파일 처리 시도를 즉시 중단합니다.
        - 사용자에게 "지원하지 않는 파일 형식입니다. CSV 또는 Excel 형식의 파일을 선택해주세요."와 같은 명확하고 친절한 알림 메시지를 팝업 또는 상태 메시지 형태로 표시합니다.
        - 프로그램은 오류 발생 후에도 안정적으로 계속 실행되어야 하며, 사용자는 다른 파일을 선택하여 업로드를 다시 시도할 수 있어야 합니다.

- **상황 2:** 업로드한 파일(CSV/Excel)은 형식이 맞지만, 내부 데이터 구조가 예상과 현저히 다르거나 필수 정보(예: 거래 날짜, 거래 내용, 금액 등)를 포함하는 컬럼을 식별할 수 없는 경우.
    - **처리:**
        - 파일 파싱(내용 분석) 단계에서 문제를 감지합니다.
        - 사용자에게 "파일 내용을 올바르게 분석할 수 없습니다. 파일이 올바른 은행 거래내역 양식인지 확인해주세요. 프로그램은 특정 열 순서(예: A열-날짜, B열-시간, C열-항목, D열-입금, E열-출금)와 첫 행의 헤더(열 이름)를 기준으로 데이터를 읽어옵니다. 자세한 내용은 [설정 > 파일 형식 안내]를 참고하세요."와 같은 상세 안내 메시지를 표시합니다. (안내 팝업 표시 설정이 켜져 있다면 해당 팝업을 다시 보여줄 수 있습니다.)
        - 파일 처리를 중단하고, 사용자가 다른 파일을 선택하거나 현재 파일의 내용을 수정한 후 다시 시도하도록 안내합니다.

- **상황 3:** 파일 내 특정 거래 내역 행의 데이터 형식이 올바르지 않은 경우 (예: 날짜 필드에 "어제"와 같은 텍스트 입력, 금액 필드에 통화 기호 외 문자 포함).
    - **처리:**
        - MVP에서는 해당 행 파싱 시 오류를 감지하면 전체 파일 처리를 중단합니다.
        - 사용자에게 "\[N\]번째 줄의 데이터 형식이 올바르지 않아 처리할 수 없습니다. (예: 날짜 형식 오류 또는 금액 오류)" 와 같이 문제 지점을 특정하여 알려줍니다.
        - 사용자가 원본 파일에서 해당 부분을 수정하고 다시 업로드하도록 안내합니다.

- **상황 4:** 파일이 암호로 보호되어 있거나, 파일 자체가 손상되어 내용을 읽을 수 없는 경우.
    - **처리:**
        - 파일 열기 또는 읽기 시도 시 발생하는 시스템 오류를 감지합니다.
        - 사용자에게 "선택하신 파일이 암호화되어 있거나 손상되어 열 수 없습니다. 다른 파일을 선택해주세요."와 같은 알림 메시지를 표시합니다.
- **상황 5:** 과도하게 큰 용량의 파일(50MB 초과) 업로드 시도.
    - **처리:**
        - 파일 크기를 확인하여 50MB를 초과할 경우, 사용자에게 "파일 용량이 너무 큽니다. (50MB 이하의 파일만 업로드 가능합니다.) 파일 분할 후 다시 시도해주세요."와 같은 메시지를 표시하고 업로드를 중단합니다.

### 4.2. OpenAI API 연동 관련 오류

- **상황 1:** 인터넷 연결이 불안정하거나 끊겨 OpenAI API 서버와 통신할 수 없는 경우.
    - **처리:**
        - API 요청 전 네트워크 연결 상태를 간략히 확인하거나, 요청 실패 시 네트워크 오류를 특정합니다.
        - 사용자에게 "인터넷 연결을 확인할 수 없습니다. AI 자동 분류를 일시 중단하고 수동으로 분류하시겠습니까?" 라는 메시지와 함께 "수동으로 계속", "재시도", "설정 확인" 버튼을 제공합니다.
        - "수동으로 계속" 선택 시, AI 추천 없이 사용자가 직접 카테고리를 선택하여 분류 작업을 진행합니다. AI 자동 분류는 불가능하지만, 다른 모든 기능(수동 분류, 저장, 대시보드 등)은 정상 작동해야 합니다.

- **상황 2:** 사용자가 설정에 입력한 OpenAI API 키가 유효하지 않거나(예: 오타, 존재하지 않는 키), 해당 키의 사용량(Credit/Quota)이 모두 소진된 경우.
    - **처리:**
        - API 서버로부터 반환되는 인증 오류 또는 사용량 초과 오류 코드를 감지합니다.
        - 사용자에게 "OpenAI API 키가 유효하지 않거나 사용량이 초과되었습니다. AI 자동 분류를 일시 중단하고 수동으로 분류하시겠습니까? [설정] 메뉴에서 API 키를 확인하거나 업데이트해주세요." 라는 메시지와 함께 "수동으로 계속", "설정으로 이동" 버튼을 제공합니다.
        - "수동으로 계속" 선택 시, AI 추천 없이 사용자가 직접 카테고리를 선택하여 분류 작업을 진행합니다. AI 자동 분류는 불가능하지만, 다른 모든 기능은 정상 작동해야 합니다.

- **상황 3:** OpenAI API 서비스 자체에서 일시적인 오류(예: 서버 과부하, 5xx 에러)가 발생하여 정상적인 응답을 받지 못하는 경우.
    - **처리:**
        - API 응답 코드를 확인하여 서버 측 오류를 감지합니다.
        - 사용자에게 "AI 분류 서비스에 일시적인 문제가 발생했습니다. AI 자동 분류를 일시 중단하고 수동으로 분류하시겠습니까? 잠시 후 [재시도] 버튼을 눌러보거나, 수동으로 계속 진행할 수 있습니다." 라는 메시지와 함께 "수동으로 계속", "재시도" 버튼을 제공합니다.
        - "수동으로 계속" 선택 시, AI 추천 없이 사용자가 직접 카테고리를 선택하여 분류 작업을 진행합니다. AI 자동 분류는 불가능하지만, 다른 모든 기능은 정상 작동해야 합니다.
        - 지속적으로 문제가 발생할 경우, API 서비스 상태 페이지(있는 경우)를 확인하도록 안내할 수 있습니다.

### 4.3. 데이터 저장 및 관리 오류

- **상황 1:** 프로그램이 사용하는 로컬 데이터베이스 파일(`AISmartLedger.db`)이 손상되었거나, 예기치 않게 삭제되었거나, 프로그램이 접근할 수 있는 권한이 없는 경우.
    - **처리:**
        - 프로그램 시작 시 또는 데이터베이스 접근 시 오류를 감지합니다.
        - 사용자에게 "데이터 파일을 불러오거나 사용하는 데 문제가 발생했습니다. 파일이 손상되었거나 접근 권한이 없을 수 있습니다. 최근 백업에서 데이터를 복원하시겠습니까?" 와 같이 문제 상황과 해결 옵션(백업 복원)을 제시합니다.
        - 만약 유효한 백업 파일도 없는 경우, "유효한 백업 파일을 찾을 수 없습니다. 안타깝지만 기존 데이터를 복구하기 어려우며, 프로그램을 초기 상태에서 다시 시작해야 할 수 있습니다. [설정 > 데이터 관리 > 프로그램 데이터 전체 초기화] 옵션을 사용하거나, 문제 해결을 위해 [도움말/지원 정보]를 참고하세요." 와 같이 안내합니다.
        - 백업 복원 기능을 안내하거나, 심각한 경우 프로그램의 정상적인 사용이 어려움을 알리고 문제 해결을 위한 기본 가이드(예: 파일 권한 확인, 프로그램 재설치 등)를 제공할 수 있습니다.

- **상황 2:** 데이터 자동/수동 백업 수행 중 오류 발생 (예: 디스크 저장 공간 부족, 대상 폴더에 쓰기 권한 없음).
    - **처리:**
        - 백업 실패 시 원인을 파악합니다(가능한 경우).
        - 사용자에게 "데이터 백업에 실패했습니다. (사유: \[구체적인 원인 명시, 예: 디스크 공간 부족 또는 쓰기 권한 없음\])" 이라는 알림 메시지를 표시합니다.
        - 사용자가 문제를 해결할 수 있도록 관련 조치(예: "디스크 공간을 확보한 후 다시 시도해주세요.", "백업 폴더의 권한을 확인해주세요.")를 간략히 안내합니다.
        - 프로그램의 다른 기능은 계속 정상적으로 사용할 수 있어야 합니다.

- **상황 3:** 데이터 복원 시 선택한 백업 파일이 손상되었거나, 현재 프로그램 버전과 호환되지 않는 이전 버전의 백업 파일인 경우.
    - **처리:**
        - 백업 파일 유효성 검사 또는 복원 시도 중 오류를 감지합니다.
        - 사용자에게 "선택하신 백업 파일이 손상되었거나 현재 프로그램 버전과 호환되지 않아 복원할 수 없습니다. 다른 백업 파일을 선택해주세요." 라는 메시지를 표시합니다.

### 4.4. 일반적인 프로그램 동작 오류

- **상황 1:** 사용자가 동시에 여러 무거운 작업을 시도하여 프로그램이 일시적으로 응답하지 않는 것처럼 보이는 경우 (예: 대용량 파일 처리 중 다른 기능 동시 실행 시도).
    - **처리:**
        - 중요하고 시간이 오래 걸리는 작업(예: 파일 가져오기, 대량 분류, 백업 등) 진행 중에는 사용자 인터페이스에 명확한 진행 상태(예: 프로그레스 바, "처리 중..." 메시지)를 표시합니다.
        - 해당 작업 중에는 다른 주요 기능 버튼을 일시적으로 비활성화(disabled)하거나, 사용자에게 현재 작업이 완료될 때까지 기다려 달라는 안내를 표시하여 중복 명령으로 인한 오류나 사용자 혼란을 방지합니다.
        - 가능하다면 백그라운드 스레드를 사용하여 오래 걸리는 작업을 처리함으로써 UI 응답성을 유지합니다.

- **상황 2:** 예기치 않은 내부 로직 오류로 인해 프로그램이 비정상적으로 종료(Crash)될 가능성이 있는 경우.
    - **처리 (최후의 수단):**
        - 전역 예외 처리기를 설정하여 예상치 못한 오류 발생 시 가능한 한 사용자 데이터를 보호하고 안전하게 종료하도록 시도합니다. (MVP에서는 복잡한 오류 리포팅 시스템 및 자동 로그 생성은 제외)
        - 오류 발생 시, 가능하다면 "예기치 않은 오류가 발생하여 프로그램을 종료해야 합니다. 작업 내용은 최근 자동 저장된 내용이나 백업 파일을 확인해보세요. 불편을 드려 죄송합니다."와 같은 사용자 친화적인 메시지를 표시 후 프로그램을 종료합니다.

# 5. 프로젝트 범위 (Scope)
> \[!note\] 이 섹션은 우리가 만들 "AI 스마트 가계부" 프로그램의 첫 번째 버전(MVP, 최소 기능 제품)에서 "무엇을 만들고, 무엇을 만들지 않을지"를 명확하게 정의하여, 개발 목표와 범위를 한정합니다.

## 5.1. 포함되는 기능 (In Scope - 반드시 구현할 것)
> \[!note\] 이 하위 섹션은 MVP(최소 기능 제품)의 핵심 가치를 제공하기 위해 이번 첫 번째 버전에 반드시 포함되어야 하는 주요 기능들을 나열합니다. 이 기능들은 `2. 주요 기능 및 동작 방식`에서 상세히 정의된 내용을 기반으로 합니다.

- **기능 2.1: 은행 거래내역 파일 가져오기 및 처리**
    - CSV, Excel 파일 지원 (최대 50MB)
    - 파일 형식 가이드라인 제공 (팝업 및 설정에서 토글 가능)
    - 기본적인 파일 유효성 검사 및 오류 처리
- **기능 2.2: AI 기반 거래내역 자동 분류 제안 및 사용자 확인/수동 지정**
    - OpenAI API를 활용한 카테고리 추천 (API 사용 가능 시)
    - 사용자의 Y/N 확인, 드롭다운을 통한 기본 카테고리 및 '계좌 간 이체 (분석 제외)' 수동 선택
    - AI 추천 신뢰도에 따른 '신호등 시스템' UI
    - 실행 취소(Undo) 기능
    - 분류 작업 중간 저장 기능
    - API 사용 불가 시에도 완전한 수동 분류 기능 보장
- **기능 2.3: 계좌 간 이체 내역 자동 식별 및 처리**
    - 여러 계좌 파일 업로드 시, 설정된 시간 범위 내 동일 금액 입출금 자동 탐지
    - 사용자의 최종 확인을 통한 '계좌 간 이체 (분석 제외)' 처리
- **기능 2.4: 가계부 데이터 시각화 (대시보드)**
    - 월별/연도별 수입 및 지출 요약 정보 표시
    - 카테고리별 지출 비중 원형 차트
    - 월별 수입/지출 추이 막대 또는 선 그래프
    - 기간 필터링 기능 (연도, 월 선택)
- **기능 2.5: 기본 설정 및 관리**
    - A. 계좌 간 이체 자동 식별 시간 허용 범위 설정
    - B. AI 학습 데이터 버전 관리 및 롤백 기능
    - C. 데이터 자동 백업 (변경 시) 및 수동 복원 기능 (최근 10개 유지)
    - D. 분류된 가계부 데이터 CSV 내보내기 (파일명 자동 생성, 기본 경로 저장)
    - E. ChatGPT API 키 입력 및 관리 (오류 시 안내 포함)
    - F. 프로그램 데이터 전체 초기화 (공장 초기화) 기능 (2단계 확인 절차 포함)
    - G. 파일 형식 안내 팝업 표시 여부 설정
- **데이터 저장:** 로컬 SQLite 데이터베이스 사용 (거래내역, AI 학습, 설정, 기본 카테고리)
- **플랫폼:** Python (PySide) 기반 크로스 플랫폼 데스크톱 애플리케이션 (macOS, Windows 최소 지원)
- **기본적인 예외 처리:** `4. 발생 가능한 예외 상황 및 처리`에서 정의된 주요 오류 상황에 대한 사용자 안내 및 프로그램 안정성 확보

## 5.2. 포함되지 않는 기능 (Out of Scope - 이번에는 만들지 않을 것)
> \[!note\] 이 하위 섹션은 MVP의 범위를 명확히 하고 혼란을 방지하기 위해, 이번 첫 번째 버전에는 포함되지 않기로 명시적으로 결정한 기능들을 나열합니다. (향후 버전에 포함될 가능성은 열려 있습니다.)

- 사용자 정의 카테고리 생성, 수정, 삭제, 계층 구조화 등 상세 관리 기능 (프로그램에 내장된 기본 카테고리만 사용)
- 은행 서버와의 직접 연동을 통한 거래내역 자동 가져오기
- 클라우드 동기화 또는 다중 사용자 지원 기능
- 모바일 애플리케이션 버전
- 데이터 파일에 대한 고급 암호화 기능 (API 키 제외)
- 복잡한 오류 리포팅 시스템 또는 프로그램 내부 오류 자동 로그 상세 생성 기능
- 애플리케이션 자동 업데이트 기능
- 상세한 예산 설정 및 지출 초과 알림 기능
- 대시보드 차트 이미지 저장 및 인쇄 기능
- 고급 데이터 분석 및 사용자 정의 리포트 생성 기능

## 5.3. 나중에 고려할 아이디어 (Future Considerations)
> \[!note\] 이 하위 섹션은 당장 MVP에 포함되지는 않지만, 향후 제품 발전 과정에서 추가를 검토하거나 구현하고 싶은 유용한 아이디어나 기능들을 기록합니다. 이는 제품의 장기적인 로드맵 수립에 참고 자료가 될 수 있습니다.

- 사용자 정의 카테고리 관리 (생성, 수정, 삭제, 계층 구조화 등 상세 기능)
- 애플리케이션 기본 표시 기간 설정 (대시보드 등)
- UI 테마 설정 (라이트/다크 모드 등)
- 예산 관리 기능 (월별/카테고리별 예산 설정, 지출 추적, 예산 초과 시 알림)
- 고급 분석 및 리포트 (특정 기간 비교 분석, 소비 패턴 심층 분석, 사용자 정의 리포트)
- 데이터 파일 암호화 옵션 제공
- 규칙 기반 패턴 찾기 고도화 (로컬 학습 DB 검색 로직 강화)
- 대시보드 차트/리포트 외부 공유 기능 (이미지 저장, 인쇄, PDF 내보내기 등)
- 반복 거래 자동 입력/알림 기능
- 다국어 지원
- 프로그램 내부 오류 자동 로그 생성 및 사용자 동의하 전송 기능

# 6. 기타 요구사항 (Miscellaneous)

기타:
- (현재까지 특별한 기타 요구사항은 없음)

